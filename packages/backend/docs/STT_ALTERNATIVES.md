# Альтернативы Yandex SpeechKit для STT

## Текущие реализации

### ✅ Vosk (локальный)
- **Статус**: ✅ Работает
- **Формат**: PCM
- **Языки**: Много (ru, en, tr, и др.)
- **Преимущества**: Бесплатно, работает офлайн, не требует интернета
- **Недостатки**: Нужно скачивать модели (~1.8 GB), ниже точность чем у облачных
- **Реализация**: Python микросервис (`packages/stt-service/`)

### ⚠️ Whisper (локальный)
- **Статус**: ⚠️ Проблемы с библиотекой
- **Формат**: PCM
- **Языки**: Много
- **Преимущества**: Бесплатно, работает офлайн, высокая точность
- **Недостатки**: Проблемы с `@xenova/transformers` версией 2.17.2
- **Реализация**: Node.js (`packages/backend/src/stt/whisper.ts`)

---

## Облачные альтернативы

### 1. OpenAI Whisper API
- **Формат**: Множество форматов (mp3, mp4, mpeg, mpga, m4a, wav, webm)
- **Языки**: 99+ языков
- **Цена**: $0.006 за минуту
- **Преимущества**: 
  - Очень высокая точность
  - Поддержка множества языков
  - Простой API
  - Поддержка streaming (через WebSocket)
- **Недостатки**: 
  - Платный (но дешевый)
  - Требует интернет
  - Нужен API ключ OpenAI
- **Документация**: https://platform.openai.com/docs/guides/speech-to-text

### 2. Google Cloud Speech-to-Text
- **Формат**: LINEAR16, FLAC, MULAW, ALAW, OGG_OPUS, SPEEX_WITH_HEADER_BYTE
- **Языки**: 125+ языков
- **Цена**: $0.006 за минуту (первые 60 минут бесплатно в месяц)
- **Преимущества**:
  - Высокая точность
  - Поддержка streaming через gRPC
  - Много языков
  - Бесплатный tier
- **Недостатки**:
  - Требует настройки Google Cloud
  - Нужен service account
- **Документация**: https://cloud.google.com/speech-to-text/docs

### 3. Azure Speech Services
- **Формат**: PCM, WAV, OGG, MP3, FLAC
- **Языки**: 100+ языков
- **Цена**: $1.00 за час (первые 5 часов бесплатно в месяц)
- **Преимущества**:
  - Хорошая точность
  - Поддержка streaming
  - Бесплатный tier
  - Хорошая документация
- **Недостатки**:
  - Требует Azure аккаунт
  - Нужна настройка
- **Документация**: https://learn.microsoft.com/en-us/azure/ai-services/speech-service/

### 4. Deepgram
- **Формат**: Множество форматов
- **Языки**: 30+ языков
- **Цена**: $0.0043 за минуту (первые 12,000 минут бесплатно)
- **Преимущества**:
  - Очень низкая задержка
  - Отличная точность
  - Streaming в реальном времени
  - Большой бесплатный tier
  - Простой API
- **Недостатки**:
  - Меньше языков чем у конкурентов
- **Документация**: https://developers.deepgram.com/

### 5. AssemblyAI
- **Формат**: Множество форматов
- **Языки**: 30+ языков
- **Цена**: $0.00025 за секунду (первые 5 часов бесплатно)
- **Преимущества**:
  - Streaming в реальном времени
  - Дополнительные фичи (sentiment, topics, etc.)
  - Бесплатный tier
- **Недостатки**:
  - Меньше языков
- **Документация**: https://www.assemblyai.com/docs/

### 6. Rev.ai
- **Формат**: Множество форматов
- **Языки**: 30+ языков
- **Цена**: $0.02 за минуту
- **Преимущества**:
  - Высокая точность
  - Streaming API
- **Недостатки**:
  - Дороже конкурентов
  - Нет бесплатного tier
- **Документация**: https://www.rev.ai/docs/

### 7. Speechmatics
- **Формат**: Множество форматов
- **Языки**: 50+ языков
- **Цена**: От $0.05 за минуту
- **Преимущества**:
  - Высокая точность
  - Streaming
- **Недостатки**:
  - Дороже
- **Документация**: https://www.speechmatics.com/api-documentation/

---

## Локальные альтернативы

### 8. Coqui STT (ранее Mozilla DeepSpeech)
- **Формат**: PCM, WAV
- **Языки**: en, ru, и другие (нужно скачивать модели)
- **Цена**: Бесплатно
- **Преимущества**:
  - Бесплатно
  - Работает офлайн
  - Open source
- **Недостатки**:
  - Нужно скачивать модели
  - Меньше языков
  - Требует настройки
- **Документация**: https://stt.readthedocs.io/

### 9. Wav2Vec 2.0 (через transformers)
- **Формат**: PCM
- **Языки**: Много (зависит от модели)
- **Цена**: Бесплатно
- **Преимущества**:
  - Бесплатно
  - Работает офлайн
  - Хорошая точность
- **Недостатки**:
  - Требует GPU для хорошей производительности
  - Нужно скачивать модели
- **Документация**: https://huggingface.co/docs/transformers/model_doc/wav2vec2

---

## Рекомендации

### Для production (облачные):
1. **Deepgram** - лучший баланс цена/качество/задержка
2. **OpenAI Whisper API** - лучшая точность
3. **Google Cloud Speech-to-Text** - хороший бесплатный tier

### Для локального использования:
1. **Vosk** - уже работает, просто использовать
2. **Whisper** - исправить проблемы с библиотекой
3. **Coqui STT** - альтернатива Vosk

### Для быстрого старта:
1. **Deepgram** - простой API, большой бесплатный tier
2. **OpenAI Whisper API** - очень простой API
3. **Vosk** - уже реализован, работает локально

---

## Сравнительная таблица

| Сервис | Цена/мин | Бесплатный tier | Streaming | Языки | Точность | Сложность |
|--------|----------|-----------------|-----------|-------|----------|-----------|
| **Vosk** (локальный) | Бесплатно | - | ✅ | 20+ | Средняя | Средняя |
| **Whisper** (локальный) | Бесплатно | - | ✅ | 99+ | Высокая | Высокая |
| **OpenAI Whisper API** | $0.006 | Нет | ✅ | 99+ | Очень высокая | Низкая |
| **Google Cloud STT** | $0.006 | 60 мин/мес | ✅ | 125+ | Высокая | Средняя |
| **Azure Speech** | $0.017 | 5 часов/мес | ✅ | 100+ | Высокая | Средняя |
| **Deepgram** | $0.0043 | 12,000 мин/мес | ✅ | 30+ | Высокая | Низкая |
| **AssemblyAI** | $0.015 | 5 часов/мес | ✅ | 30+ | Высокая | Низкая |

---

## Следующие шаги

1. Выберите сервис из списка
2. Реализуйте модуль по аналогии с существующими (`yandex-speechkit.ts`)
3. Добавьте в `stt/index.ts`
4. Протестируйте

Какой сервис хотите попробовать?

